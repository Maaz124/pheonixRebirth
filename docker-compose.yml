
services:
  app:
    build: .
    ports:
      - "5000:5000"
    environment:
      - DATABASE_URL=postgresql://phoenix_admin:phoenix_secure_pass_123!@db:5432/phoenix_rebirth
      - NODE_ENV=production
      # Add other necessary env vars here, potentially loading from a .env file
    depends_on:
      - db
    networks:
      - phoenix_network

  db:
    image: postgres:16-alpine
    environment:
      - POSTGRES_USER=phoenix_admin
      - POSTGRES_PASSWORD=phoenix_secure_pass_123!
      - POSTGRES_DB=phoenix_rebirth
    volumes:
      - pgdata:/var/lib/postgresql/data
    networks:
      - phoenix_network
    # Security: No ports exposed to host machine. Only accessible within phoenix_network.

volumes:
  pgdata:

networks:
  phoenix_network:
    driver: bridge
